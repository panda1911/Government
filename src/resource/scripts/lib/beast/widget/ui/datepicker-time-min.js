("TimeSelector" in jQuery.ui.datepicker)||(function(a,b){a.extend(a.ui.datepicker,{TimeSelector:function(d,c){this.father=c;this.fcon=d.parent("div.box");this.popupannel=a("div.selectime",this.fcon);if(typeof c._time=="undefined"){c._time=c.options.date}this.time=c._time;this.status="s";this.ctime=a("<div>",{"class":"time",html:'时间：<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><div class="cta"><button class="u"></button><button class="d"></button></div>'});this.button=a("<button>",{"class":"ok",html:"确定"});this.clearBtn=a("<button>",{"class":"clear",html:"清空"});this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.m_a=["00","10","20","30","40","50"];this.s_a=["00","10","20","30","40","50"];this._init(d)}});a.extend(a.ui.datepicker.TimeSelector.prototype,{parseSubHtml:function(c){var e="";for(var d=0;d<c.length;d++){e+='<a href="javascript:void(0);" class="item">'+c[d]+"</a>"}e+='<a href="javascript:void(0);" class="x">x</a>';return e},showPopup:function(d){var e=this;this.popupannel.html(d);this.popupannel.removeClass("fd-hide");var c=e.status;a("span",e.ctime).removeClass("on");switch(c){case"h":a("span.h",e.ctime).addClass("on");break;case"m":a("span.m",e.ctime).addClass("on");break;case"s":a("span.s",e.ctime).addClass("on");break}},hidePopup:function(){this.popupannel.addClass("fd-hide")},render:function(){var d=this;var f=d.get("h");var c=d.get("m");var e=d.get("s");d.father._time=d.time;a("span.h",d.ctime).html(f>9?f:("0"+f));a("span.m",d.ctime).html(c>9?c:("0"+c));a("span.s",d.ctime).html(e>9?e:("0"+e));return d},set:function(c,e){var d=this;e=Number(e);switch(c){case"h":d.time.setHours(e);break;case"m":d.time.setMinutes(e);break;case"s":d.time.setSeconds(e);break}d.render()},get:function(c){var d=this;var e=d.time;switch(c){case"h":return e.getHours();case"m":return e.getMinutes();case"s":return e.getSeconds()}},add:function(){var e=this;var c=e.status;var d=e.get(c);d++;e.set(c,d)},minus:function(){var e=this;var c=e.status;var d=e.get(c);d--;e.set(c,d)},_init:function(d){var c=this;d.html("").append(c.ctime);d.append(c.button);d.append(c.clearBtn);c.render();c.popupannel.bind("click.ui-datepicker-time",function(h){var g=a(h.target);if(g.hasClass("x")){c.hidePopup()}else{if(g.hasClass("item")){var f=Number(g.html());c.set(c.status,f);c.hidePopup()}}});c.button.bind("click.ui-datepicker-time",function(g){var f=c.father,i=f.options,h=typeof f.dt_selected=="undefined"?f.selected:f.dt_selected;h.setHours(c.get("h"));h.setMinutes(c.get("m"));h.setSeconds(c.get("s"));c.father._setOption("date",h)._trigger("timeSelect",g,{date:h});if(i.popup&&i.closable){c.father.hide(g)}});c.clearBtn.bind("click.ui-datepicker-time",function(g){var f=c.father;f.clear();f.hide(g)});c.ctime.bind("keyup.ui-datepicker-time",function(g){var f=a.ui.keyCode;if(g.keyCode==f.UP||g.keyCode==f.LEFT){g.preventDefault();c.add()}if(g.keyCode==f.DOWN||g.keyCode==f.RIGHT){g.preventDefault();c.minus()}});a("button.u",c.ctime).bind("click.ui-datepicker-time",function(){c.hidePopup();c.add()});a("button.d",c.ctime).bind("click.ui-datepicker-time",function(){c.hidePopup();c.minus()});a("span.h",c.ctime).bind("click.ui-datepicker-time",function(){var e=c.parseSubHtml(c.h_a);c.status="h";c.showPopup(e)});a("span.m",c.ctime).bind("click.ui-datepicker-time",function(){var e=c.parseSubHtml(c.m_a);c.status="m";c.showPopup(e)});a("span.s",c.ctime).bind("click.ui-datepicker-time",function(){var e=c.parseSubHtml(c.s_a);c.status="s";c.showPopup(e)})}});a.add("ui-datepicker-time")})(jQuery);