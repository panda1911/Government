"storage"in jQuery.util||function($){var _funcsCache=[],Engine,initStat=false,dependence=function(){var de=[];if(!$.support.JSON)de.push("util-json");if(!$.support.localStorage){de.push("ui-flash-storage");Engine="swfStoreTemp"}else Engine=window.localStorage;return de}();$.extend($.util,{storage:$.extend({setItem:function(key,value){try{var result=Engine.setItem(key,value)}catch(ex){this.trigger("error",{exception:ex})}return result},getItem:function(key){return Engine.getItem(key)},setJson:function(key,
value){return this.setItem(key,encodeURIComponent(JSON.stringify(value)))},getJson:function(key){return JSON.parse(decodeURIComponent(this.getItem(key)))},removeItem:function(key){return Engine.removeItem(key)},clear:function(){return Engine.clear()},getLength:function(){return $.support.localStorage?Engine.length:Engine.getLength()},key:function(n){return Engine.key(n)},ready:function(func){if(initStat)func();else _funcsCache.push(func)}},$.EventTarget)});function _init(){if(!initStat)_loadDependence(function(){if(Engine===
"swfStoreTemp")$(function(){_initSwfStore();$("#swf-storage").bind("contentReady.flash",function(){Engine=$(this).flash("getEngine");_completeInit()}).bind("error.flash",function(ev,o){$.util.storage.trigger("error",o)}).bind("securityError.flash",function(ev,o){$.util.storage.trigger("securityError",o)})});else _completeInit()})}function _completeInit(){initStat=true;for(var i=0,l=_funcsCache.length;i<l;i++)_funcsCache[i]()}function _loadDependence(callback){if(_isAllOk()){callback();return}for(var i=
0,l=dependence.length;i<l;i++)(function(i){$.use(dependence[i],function(){dependence[i]=true;if(_isAllOk())callback()})})(i)}function _initSwfStore(){$('<div id="swf-storage">').appendTo("body").css({position:"absolute",left:"0px",top:"0px",width:"1px",height:"1px"}).flash({module:"storage"})}function _isAllOk(){if(dependence.length===0)return true;else{for(var i=0,l=dependence.length;i<l;i++)if(dependence[i]!==true)return false;return true}}_init();$.add("util-storage")}(jQuery);
