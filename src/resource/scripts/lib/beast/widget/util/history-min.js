("History" in jQuery.util)||(function(a){a.History={options:{debug:false},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(b){var c=b.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"");return c},getState:function(){var b=a.History;return b.state},setState:function(c){var b=a.History;c=b.extractHash(c);b.state=c;return b.state},getHash:function(){var b=a.History;var c=b.extractHash(window.location.hash||location.hash);return c},setHash:function(c){var b=a.History;c=b.extractHash(c);if(typeof window.location.hash!=="undefined"){if(window.location.hash!==c){window.location.hash=c}}else{if(location.hash!==c){location.hash=c}}return c},go:function(e){var b=a.History;e=b.extractHash(e);var d=b.getHash(),c=b.getState();if(e!==d){b.setHash(e)}else{if(e!==c){b.setState(e)}b.trigger()}return true},hashchange:function(d){var b=a.History;var c=b.getHash();b.go(c);return true},bind:function(d,b){var c=a.History;if(b){if(typeof c.handlers.specific[d]==="undefined"){c.handlers.specific[d]=[]}c.handlers.specific[d].push(b)}else{b=d;c.handlers.generic.push(b)}return true},trigger:function(f){var d=a.History;if(typeof f==="undefined"){f=d.getState()}var b,g,c,e;if(typeof d.handlers.specific[f]!=="undefined"){e=d.handlers.specific[f];for(b=0,g=e.length;b<g;++b){c=e[b];c(f)}}e=d.handlers.generic;for(b=0,g=e.length;b<g;++b){c=e[b];c(f)}return true},construct:function(){var b=a.History;a(document).ready(function(){b.domReady()});return true},configure:function(b){var c=a.History;c.options=a.extend(c.options,b);return true},domReadied:false,domReady:function(){var b=a.History;if(b.domRedied){return}b.domRedied=true;b.$window=a(window);b.$window.bind("hashchange",this.hashchange);setTimeout(b.hashchangeLoader,200);return true},nativeSupport:function(d){d=d||a.browser;var c=d.version,b=parseInt(c,10),g=c.split(/[^0-9]/g),f=parseInt(g[0],10),e=parseInt(g[1],10),i=parseInt(g[2],10),h=false;if((d.msie||false)&&b>=8){h=true}else{if((d.webkit||false)&&b>=528){h=true}else{if((d.mozilla||false)){if(f>1){h=true}else{if(f===1){if(e>9){h=true}else{if(e===9){if(i>=2){h=true}}}}}}else{if((d.opera||false)){if(f>10){h=true}else{if(f===10){if(e>=60){h=true}}}}}}}return h},hashchangeLoader:function(){var c=a.History;var f=c.nativeSupport();if(!f){var b;if(a.browser.msie){c.$iframe=a('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0];c.$iframe.contentWindow.document.open();c.$iframe.contentWindow.document.close();var e=false;b=function(){var i=c.getHash();var h=c.getState();var g=c.extractHash(c.$iframe.contentWindow.document.location.hash);if(h!==i){if(!e){c.$iframe.contentWindow.document.open();c.$iframe.contentWindow.document.close();c.$iframe.contentWindow.document.location.hash=i}e=false;c.$window.trigger("hashchange")}else{if(h!==g){e=true;c.setHash(g)}}}}else{b=function(){var h=c.getHash();var g=c.getState();if(g!==h){c.$window.trigger("hashchange")}}}setInterval(b,200)}else{var d=c.getHash();if(d){c.$window.trigger("hashchange")}}return true}};a.History.construct();a.add("util-history")})(jQuery);